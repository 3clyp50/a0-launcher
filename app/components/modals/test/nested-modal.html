<html>
<head>
  <title>Nested Modal</title>
</head>
<body>
  <div>
    <div class="section">
      <div style="display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-md);">
        <div>
          <div style="font-weight: 700; color: var(--color-text);">Nested modal</div>
          <div style="margin-top: var(--spacing-xs); color: var(--color-text-secondary); font-size: 0.9rem;">
            This modal is used to validate stacking, backdrop placement, and ESC-to-close behavior.
          </div>
        </div>
        <button class="button cancel" type="button" onclick="closeModal()">Close</button>
      </div>

      <div style="margin-top: var(--spacing-md);">
        <div style="font-family: var(--font-family-code); font-size: 0.9rem;">
          Opened at: <span class="nested-opened-at"></span>
        </div>
      </div>

      <script>
        (() => {
          // Note: component loader may execute scripts outside of their original DOM position.
          // So we query within the injected modal body (the script's parent) *after* injection.
          const root = document.currentScript?.parentElement;
          const set = () => {
            const el = root?.querySelector?.(".nested-opened-at");
            if (el) el.textContent = new Date().toISOString();
          };
          queueMicrotask(set);
        })();
      </script>
    </div>
  </div>
</body>
</html>


